# Conventional Commits 검증
# 형식: Type(scope): message
# 예: Feat(frontend): add login screen
#     Fix(backend): resolve auth token issue

commit_msg=$(cat "$1")

# Conventional Commits 패턴 (대문자 허용)
pattern="^(Feat|Fix|Docs|Style|Refactor|Perf|Test|Build|CI|Chore|Revert)(\(.+\))?: .{1,}"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
  echo "❌ 커밋 메시지가 Conventional Commits 형식이 아닙니다."
  echo ""
  echo "올바른 형식: Type(scope): message"
  echo ""
  echo "사용 가능한 Type (대문자):"
  echo "  Feat     - 새로운 기능"
  echo "  Fix      - 버그 수정"
  echo "  Docs     - 문서 변경"
  echo "  Style    - 코드 포맷팅 (기능 변경 없음)"
  echo "  Refactor - 리팩토링"
  echo "  Perf     - 성능 개선"
  echo "  Test     - 테스트 추가/수정"
  echo "  Build    - 빌드 시스템/의존성 변경"
  echo "  CI       - CI 설정 변경"
  echo "  Chore    - 기타 변경"
  echo "  Revert   - 이전 커밋 되돌리기"
  echo ""
  echo "scope (선택): frontend, backend, etc."
  echo ""
  echo "예시:"
  echo "  Feat(frontend): add user profile screen"
  echo "  Fix(backend): resolve database connection issue"
  echo "  Docs: update README"
  echo ""
  exit 1
fi